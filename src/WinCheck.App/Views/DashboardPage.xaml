<Page
    x:Class="WinCheck.App.Views.DashboardPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <ScrollViewer>
        <StackPanel Padding="24" Spacing="24">

            <!-- Header -->
            <TextBlock Text="System Health Dashboard"
                      Style="{StaticResource TitleTextBlockStyle}" />

            <!-- Quick Actions -->
            <StackPanel Spacing="16">
                <TextBlock Text="Quick Actions"
                          Style="{StaticResource SubtitleTextBlockStyle}" />

                <StackPanel Orientation="Horizontal" Spacing="12">
                    <Button Command="{x:Bind ViewModel.QuickScanCommand}"
                           Style="{StaticResource AccentButtonStyle}">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon Glyph="&#xE74D;" FontSize="16" />
                            <TextBlock Text="Quick Scan" />
                        </StackPanel>
                    </Button>

                    <Button Command="{x:Bind ViewModel.DeepScanCommand}">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon Glyph="&#xE721;" FontSize="16" />
                            <TextBlock Text="Deep Scan" />
                        </StackPanel>
                    </Button>

                    <Button Command="{x:Bind ViewModel.OptimizeCommand}">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon Glyph="&#xE713;" FontSize="16" />
                            <TextBlock Text="Optimize" />
                        </StackPanel>
                    </Button>
                </StackPanel>
            </StackPanel>

            <!-- Status Message -->
            <TextBlock Text="{x:Bind ViewModel.StatusMessage, Mode=OneWay}"
                      Foreground="{ThemeResource SystemAccentColor}"
                      TextWrapping="Wrap"
                      FontWeight="SemiBold" />

            <!-- System Metrics -->
            <Grid ColumnSpacing="16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!-- CPU Card -->
                <Border Grid.Column="0"
                       Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                       BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                       BorderThickness="1"
                       CornerRadius="8"
                       Padding="16">
                    <StackPanel Spacing="8">
                        <FontIcon Glyph="&#xE950;" FontSize="32"
                                 Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}" />
                        <TextBlock Text="CPU Usage" Style="{StaticResource BodyStrongTextBlockStyle}" />
                        <TextBlock Text="{x:Bind ViewModel.CpuUsage, Mode=OneWay}"
                                  Style="{StaticResource TitleTextBlockStyle}" />
                    </StackPanel>
                </Border>

                <!-- Memory Card -->
                <Border Grid.Column="1"
                       Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                       BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                       BorderThickness="1"
                       CornerRadius="8"
                       Padding="16">
                    <StackPanel Spacing="8">
                        <FontIcon Glyph="&#xE7C4;" FontSize="32"
                                 Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}" />
                        <TextBlock Text="Memory" Style="{StaticResource BodyStrongTextBlockStyle}" />
                        <TextBlock Text="{x:Bind ViewModel.MemoryUsage, Mode=OneWay}"
                                  Style="{StaticResource TitleTextBlockStyle}" />
                    </StackPanel>
                </Border>

                <!-- Disk Card -->
                <Border Grid.Column="2"
                       Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                       BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                       BorderThickness="1"
                       CornerRadius="8"
                       Padding="16">
                    <StackPanel Spacing="8">
                        <FontIcon Glyph="&#xE74E;" FontSize="32"
                                 Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}" />
                        <TextBlock Text="Disk Space" Style="{StaticResource BodyStrongTextBlockStyle}" />
                        <TextBlock Text="{x:Bind ViewModel.DiskUsage, Mode=OneWay}"
                                  Style="{StaticResource TitleTextBlockStyle}" />
                    </StackPanel>
                </Border>
            </Grid>

            <!-- Health Score Section -->
            <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                   BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                   BorderThickness="1"
                   CornerRadius="8"
                   Padding="24">
                <StackPanel Spacing="16">
                    <TextBlock Text="Overall Health Score"
                              Style="{StaticResource SubtitleTextBlockStyle}" />

                    <TextBlock Text="{x:Bind ViewModel.OverallHealthScore, Mode=OneWay}"
                              Style="{StaticResource HeaderTextBlockStyle}"
                              HorizontalAlignment="Center"
                              Foreground="{ThemeResource SystemAccentColor}" />

                    <TextBlock Text="/ 100"
                              HorizontalAlignment="Center"
                              Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                </StackPanel>
            </Border>

            <!-- AI Explanation -->
            <StackPanel Spacing="12">
                <TextBlock Text="AI Analysis"
                          Style="{StaticResource SubtitleTextBlockStyle}" />

                <Border Background="{ThemeResource LayerFillColorDefaultBrush}"
                       Padding="16"
                       CornerRadius="8">
                    <TextBlock Text="{x:Bind ViewModel.AiExplanation, Mode=OneWay}"
                              TextWrapping="Wrap"
                              Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                </Border>
            </StackPanel>

            <!-- Recommendations -->
            <StackPanel Spacing="12">
                <TextBlock Text="Recommendations"
                          Style="{StaticResource SubtitleTextBlockStyle}" />

                <ListView ItemsSource="{x:Bind ViewModel.Recommendations, Mode=OneWay}"
                         SelectionMode="None"
                         MaxHeight="300">
                    <ListView.ItemTemplate>
                        <DataTemplate x:DataType="x:String">
                            <Grid Padding="12,8">
                                <TextBlock Text="{Binding}" TextWrapping="Wrap" />
                            </Grid>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
            </StackPanel>

            <!-- Information Box -->
            <StackPanel Spacing="8"
                       Background="{ThemeResource LayerFillColorDefaultBrush}"
                       Padding="16"
                       CornerRadius="8">
                <TextBlock Text="ℹ️ Getting Started" FontWeight="SemiBold" />
                <TextBlock TextWrapping="Wrap" Foreground="{ThemeResource TextFillColorSecondaryBrush}">
                    Configure your AI provider in Settings (gear icon) before using Quick Scan or Deep Scan features.
                </TextBlock>
            </StackPanel>

        </StackPanel>
    </ScrollViewer>
</Page>
